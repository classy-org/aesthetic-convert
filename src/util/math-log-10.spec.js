const chai = require('chai');
const service = require('./math-log-10');
const expect = chai.expect;

describe('math-log-10 (Math.log10 backport)', () => {

  const TEST_VALUES = {
    '0.00000001':    '-8.0000000000',
    '0.00000008425': '-7.0744300905',
    '0.0000001':     '-7.0000000000',
    '0.0000003198':  '-6.4951215406',
    '0.000001':      '-6.0000000000',
    '0.000002090':   '-5.6798537139', 
    '0.00001':       '-5.0000000000',
    '0.00001877':    '-4.7265357274',
    '0.0001':        '-4.0000000000',
    '0.0009736':     '-3.0116194348',
    '0.001':         '-3.0000000000',
    '0.002345':      '-2.6298571529',    
    '0.01':          '-2.0000000000',
    '0.04555':       '-1.3415116187',
    '0.1':           '-1.0000000000',
    '0.799':         '-0.0974532207',
    '1':             '0.0000000000',
    '1.513':         '0.1798389280',
    '10':            '1.0000000000',
    '17.132':        '1.2338080657',
    '100':           '2.0000000000',
    '931.587':       '2.9692234195',
    '1000':          '3.0000000000',
    '1389.199':      '3.1427644620',
    '10000':         '4.0000000000',
    '59021.995':     '4.7710138850',
    '100000':        '5.0000000000',
    '333333.019':    '5.5228783357',
    '1000000':       '6.0000000000',
    '8432187.391':   '6.9259402494',
    '10000000':      '7.0000000000',
    '10742932.444':  '7.0311228447'
  };

  for (let input in TEST_VALUES) {
    it(`should return the log10 of ${input} with reasonable accuracy`, () => {
      const expected = TEST_VALUES[input];
      const output = service(input);
      // Check hardcoded value
      expect(output.toFixed(10)).to.equal(expected);
      // Also check that the hardcoded value is correct
      expect(output.toFixed(10)).to.equal(Math.log10(input).toFixed(10));
    });
  }
});